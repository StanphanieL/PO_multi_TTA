[Conditioning] source=auto
[Cluster] cluster_norm=True -> Predicted clusters available for per-cluster metrics.
Test samples: 1312
[Conditioning][Summary] used_cluster=1312/1312, used_true=0, used_unconditional=0
[Cluster-Class][Confusion] valid=1312 classes=40 clusters=40
[Cluster-Class][Index-consistency] diag_frac=0.9748 (assuming cluster_id == class_id)
  cluster 0 -> class 0 hit=29/29 (100.00%)
  cluster 1 -> class 1 hit=29/29 (100.00%)
  cluster 2 -> class 2 hit=29/29 (100.00%)
  cluster 3 -> class 3 hit=34/34 (100.00%)
  cluster 4 -> class 4 hit=36/36 (100.00%)
  cluster 5 -> class 5 hit=33/33 (100.00%)
  cluster 6 -> class 6 hit=33/33 (100.00%)
  cluster 7 -> class 7 hit=33/33 (100.00%)
  cluster 8 -> class 8 hit=33/33 (100.00%)
  cluster 9 -> class 9 hit=33/33 (100.00%)
  cluster 10 -> class 10 hit=34/34 (100.00%)
  cluster 11 -> class 11 hit=34/34 (100.00%)
  cluster 12 -> class 12 hit=36/36 (100.00%)
  cluster 13 -> class 13 hit=33/33 (100.00%)
  cluster 14 -> class 14 hit=34/34 (100.00%)
  cluster 15 -> class 15 hit=34/34 (100.00%)
  cluster 16 -> class 16 hit=34/34 (100.00%)
  cluster 17 -> class 17 hit=29/29 (100.00%)
  cluster 18 -> class 18 hit=29/30 (96.67%)
  cluster 19 -> class 19 hit=29/29 (100.00%)
  cluster 20 -> class 20 hit=30/30 (100.00%)
  cluster 21 -> class 21 hit=29/29 (100.00%)
  cluster 22 -> class 22 hit=38/38 (100.00%)
  cluster 23 -> class 23 hit=29/29 (100.00%)
  cluster 24 -> class 24 hit=38/38 (100.00%)
  cluster 25 -> class 25 hit=37/37 (100.00%)
  cluster 26 -> class 33 hit=16/30 (53.33%)
  cluster 27 -> class 27 hit=29/29 (100.00%)
  cluster 28 -> class 28 hit=38/38 (100.00%)
  cluster 29 -> class 29 hit=37/37 (100.00%)
  cluster 30 -> class 30 hit=33/33 (100.00%)
  cluster 31 -> class 31 hit=31/31 (100.00%)
  cluster 32 -> class 32 hit=29/29 (100.00%)
  cluster 33 -> class 26 hit=15/28 (53.57%)
  cluster 34 -> class 34 hit=37/37 (100.00%)
  cluster 35 -> class 35 hit=37/37 (100.00%)
  cluster 36 -> class 36 hit=29/30 (96.67%)
  cluster 37 -> class 37 hit=29/29 (100.00%)
  cluster 38 -> class 38 hit=37/37 (100.00%)
  cluster 39 -> class 39 hit=37/37 (100.00%)
[Global] pos_rate=0.013363
[Global] object AUC-ROC: 0.8082303370786517, point AUC-ROC: 0.9415580542070278, object AUCP-PR: 0.858180162891785, point AUCP-PR: 0.4695929126016295
[TTA-Time] pre_infer_total=137.6876s, per_sample=0.1049s
[TTA-Time] tta_infer_total=1231.9887s, per_sample=0.9390s, views=8
[Global-preTTA] object AUC-ROC: 0.7748618913857679, point AUC-ROC: 0.9165817659830504, object AUCP-PR: 0.8345488579270315, point AUCP-PR: 0.3946944496245454
[Global-postTTA] object AUC-ROC: 0.8082303370786517, point AUC-ROC: 0.9415580542070278, object AUCP-PR: 0.858180162891785, point AUCP-PR: 0.4695929126016295
[Sample-macro] point AP (macro over samples) = 0.5596140420603164

[Per-Cluster metrics with cluster-wise mad normalization]
  [cluster 0] N=29 objAUC=0.9761904761904763 ptAUC=0.9215959589155147 objAP=0.9790249433106575 ptAP=0.5137113009451932 pos_rate=0.046011
  [cluster 1] N=29 objAUC=0.8952380952380953 ptAUC=0.9702288676604892 objAP=0.912853616971264 ptAP=0.6097282028683426 pos_rate=0.010704
  [cluster 2] N=29 objAUC=0.9476190476190477 ptAUC=0.9855152463344968 objAP=0.9493798684975154 ptAP=0.7416137692940068 pos_rate=0.014816
  [cluster 3] N=34 objAUC=0.9368421052631579 ptAUC=0.959257549257725 objAP=0.9444290828122504 ptAP=0.5085418625641722 pos_rate=0.014521
  [cluster 4] N=36 objAUC=0.8253968253968254 ptAUC=0.9333671505048343 objAP=0.9011678730476687 ptAP=0.6239550539920573 pos_rate=0.010945
  [cluster 5] N=33 objAUC=0.7814814814814814 ptAUC=0.9637046426361533 objAP=0.8339159657215214 ptAP=0.44683297387135423 pos_rate=0.024238
  [cluster 6] N=33 objAUC=0.8333333333333333 ptAUC=0.9468671585210489 objAP=0.8962066038536627 ptAP=0.5958783719104748 pos_rate=0.005272
  [cluster 7] N=33 objAUC=0.9222222222222223 ptAUC=0.9837458463205814 objAP=0.9490552203787498 ptAP=0.7992018242839602 pos_rate=0.008974
  [cluster 8] N=33 objAUC=0.8444444444444444 ptAUC=0.9522042368917029 objAP=0.9026246811104383 ptAP=0.5327985691530438 pos_rate=0.005240
  [cluster 9] N=33 objAUC=0.9518518518518518 ptAUC=0.9775571412833136 objAP=0.9694606887589344 ptAP=0.7901677138588026 pos_rate=0.008550
  [cluster 10] N=34 objAUC=0.8175438596491228 ptAUC=0.9655162054787969 objAP=0.884203479909851 ptAP=0.6160005603197296 pos_rate=0.009434
  [cluster 11] N=34 objAUC=0.8701754385964913 ptAUC=0.9305793763559443 objAP=0.9159735155098365 ptAP=0.5273394397638288 pos_rate=0.022904
  [cluster 12] N=36 objAUC=0.8126984126984127 ptAUC=0.9696152562062759 objAP=0.8898572826876323 ptAP=0.6810462529802275 pos_rate=0.019210
  [cluster 13] N=33 objAUC=0.9111111111111111 ptAUC=0.9603370564054633 objAP=0.9473384464247038 ptAP=0.5331324591449493 pos_rate=0.033391
  [cluster 14] N=34 objAUC=0.9087719298245613 ptAUC=0.9693086766817864 objAP=0.9347994480127444 ptAP=0.6607962407964243 pos_rate=0.007278
  [cluster 15] N=34 objAUC=0.863157894736842 ptAUC=0.9604841645315565 objAP=0.9163657020309686 ptAP=0.5607214945482099 pos_rate=0.006203
  [cluster 16] N=34 objAUC=0.7894736842105263 ptAUC=0.9698988135878163 objAP=0.8801692685637035 ptAP=0.5979701709907151 pos_rate=0.006009
  [cluster 17] N=29 objAUC=0.9047619047619049 ptAUC=0.9455298284475653 objAP=0.9201797944058006 ptAP=0.39330075512975066 pos_rate=0.017954
  [cluster 18] N=30 objAUC=0.8177777777777777 ptAUC=0.9091472389885693 objAP=0.8829517396184061 ptAP=0.42010979753250755 pos_rate=0.012529
  [cluster 19] N=29 objAUC=0.9857142857142858 ptAUC=0.9749292260764113 objAP=0.9859693877551019 ptAP=0.7307896383095132 pos_rate=0.019884
  [cluster 20] N=30 objAUC=0.9688888888888889 ptAUC=0.880732403168935 objAP=0.9698064353946707 ptAP=0.44315869567725563 pos_rate=0.026679
  [cluster 21] N=29 objAUC=0.8 ptAUC=0.9200002696513799 objAP=0.8307343924191749 ptAP=0.20288829945148817 pos_rate=0.017620
  [cluster 22] N=38 objAUC=0.7884057971014493 ptAUC=0.9193751295841633 objAP=0.8693225783736793 ptAP=0.47106712944932927 pos_rate=0.018304
  [cluster 23] N=29 objAUC=0.9380952380952381 ptAUC=0.9309656469514471 objAP=0.9385813434685615 ptAP=0.25481906431324874 pos_rate=0.014613
  [cluster 24] N=38 objAUC=0.8260869565217391 ptAUC=0.9455957494891514 objAP=0.909643652146849 ptAP=0.6450509129938853 pos_rate=0.006283
  [cluster 25] N=37 objAUC=0.6303030303030304 ptAUC=0.8484706320884656 objAP=0.7473852777657124 ptAP=0.2274481535018088 pos_rate=0.013238
  [cluster 26] N=30 objAUC=0.9547511312217194 ptAUC=0.9748959656370302 objAP=0.9597069597069594 ptAP=0.655091863488384 pos_rate=0.008856
  [cluster 27] N=29 objAUC=0.7476190476190476 ptAUC=0.885076394238539 objAP=0.7106110303315272 ptAP=0.21447612587620218 pos_rate=0.028549
  [cluster 28] N=38 objAUC=0.6000000000000001 ptAUC=0.8261276902077516 objAP=0.7569654026351079 ptAP=0.30249756173331077 pos_rate=0.012866
  [cluster 29] N=37 objAUC=0.6 ptAUC=0.8459087891400349 objAP=0.7895738231984164 ptAP=0.4524415247117457 pos_rate=0.021178
  [cluster 30] N=33 objAUC=0.6 ptAUC=0.790918028224084 objAP=0.7213938678992579 ptAP=0.2206596085809877 pos_rate=0.011334
  [cluster 31] N=31 objAUC=0.9958333333333333 ptAUC=0.9841217582151875 objAP=0.9963235294117647 ptAP=0.6978420095848011 pos_rate=0.022079
  [cluster 32] N=29 objAUC=0.9238095238095239 ptAUC=0.8961957140957765 objAP=0.9212353939244695 ptAP=0.32584297589844435 pos_rate=0.008025
  [cluster 33] N=28 objAUC=0.9589743589743589 ptAUC=0.9834730786439358 objAP=0.9711500974658869 ptAP=0.7236966576747588 pos_rate=0.013900
  [cluster 34] N=37 objAUC=0.8242424242424241 ptAUC=0.927793735044752 objAP=0.9045465132693391 ptAP=0.4870834540939297 pos_rate=0.017268
  [cluster 35] N=37 objAUC=0.6696969696969697 ptAUC=0.9609523716305602 objAP=0.8144188166262007 ptAP=0.45867698771810317 pos_rate=0.005107
  [cluster 36] N=30 objAUC=0.76 ptAUC=0.9260741562813964 objAP=0.8065341089166638 ptAP=0.4908715596264123 pos_rate=0.009659
  [cluster 37] N=29 objAUC=0.980952380952381 ptAUC=0.9928546934633099 objAP=0.9804748822605964 ptAP=0.670756109070304 pos_rate=0.006073
  [cluster 38] N=37 objAUC=0.7909090909090909 ptAUC=0.9705554743637462 objAP=0.8963720185371242 ptAP=0.8479061166362735 pos_rate=0.007699
  [cluster 39] N=37 objAUC=0.8636363636363635 ptAUC=0.972256480340153 objAP=0.9294937323811421 ptAP=0.8074428094624838 pos_rate=0.008288
  [cluster-macro] objAUC=0.8454502679356881 ptAUC=0.9382933450386461 objAP=0.8955050116378629 ptAP=0.5370838517950105

[Per-Category metrics (by true category) with category-wise mad normalization]
  [cat 0] N=29 objAUC=0.9761904761904763 ptAUC=0.9215959589155147 objAP=0.9790249433106575 ptAP=0.5137113009451932 pos_rate=0.046011
  [cat 1] N=29 objAUC=0.8952380952380953 ptAUC=0.9702288676604892 objAP=0.912853616971264 ptAP=0.6097282028683426 pos_rate=0.010704
  [cat 2] N=29 objAUC=0.9476190476190477 ptAUC=0.9855152463344968 objAP=0.9493798684975154 ptAP=0.7416137692940068 pos_rate=0.014816
  [cat 3] N=34 objAUC=0.9368421052631579 ptAUC=0.959257549257725 objAP=0.9444290828122504 ptAP=0.5085418625641722 pos_rate=0.014521
  [cat 4] N=36 objAUC=0.8253968253968254 ptAUC=0.9333671505048343 objAP=0.9011678730476687 ptAP=0.6239550539920573 pos_rate=0.010945
  [cat 5] N=33 objAUC=0.7814814814814814 ptAUC=0.9637046426361533 objAP=0.8339159657215214 ptAP=0.44683297387135423 pos_rate=0.024238
  [cat 6] N=33 objAUC=0.8333333333333333 ptAUC=0.9468671585210489 objAP=0.8962066038536627 ptAP=0.5958783719104748 pos_rate=0.005272
  [cat 7] N=33 objAUC=0.9222222222222223 ptAUC=0.9837458463205814 objAP=0.9490552203787498 ptAP=0.7992018242839602 pos_rate=0.008974
  [cat 8] N=33 objAUC=0.8444444444444444 ptAUC=0.9522042368917029 objAP=0.9026246811104383 ptAP=0.5327985691530438 pos_rate=0.005240
  [cat 9] N=33 objAUC=0.9518518518518518 ptAUC=0.9775571412833136 objAP=0.9694606887589344 ptAP=0.7901677138588026 pos_rate=0.008550
  [cat 10] N=34 objAUC=0.8175438596491228 ptAUC=0.9655162054787969 objAP=0.884203479909851 ptAP=0.6160005603197296 pos_rate=0.009434
  [cat 11] N=36 objAUC=0.8317460317460318 ptAUC=0.927400584044845 objAP=0.8984248196450906 ptAP=0.5166391243979793 pos_rate=0.020688
  [cat 12] N=36 objAUC=0.8126984126984127 ptAUC=0.9696152562062759 objAP=0.8898572826876323 ptAP=0.6810462529802275 pos_rate=0.019210
  [cat 13] N=33 objAUC=0.9111111111111111 ptAUC=0.9603370564054633 objAP=0.9473384464247038 ptAP=0.5331324591449493 pos_rate=0.033391
  [cat 14] N=34 objAUC=0.9087719298245613 ptAUC=0.9693086766817864 objAP=0.9347994480127444 ptAP=0.6607962407964243 pos_rate=0.007278
  [cat 15] N=34 objAUC=0.863157894736842 ptAUC=0.9604841645315565 objAP=0.9163657020309686 ptAP=0.5607214945482099 pos_rate=0.006203
  [cat 16] N=34 objAUC=0.7894736842105263 ptAUC=0.9698988135878163 objAP=0.8801692685637035 ptAP=0.5979701709907151 pos_rate=0.006009
  [cat 17] N=29 objAUC=0.9047619047619049 ptAUC=0.9455298284475653 objAP=0.9201797944058006 ptAP=0.39330075512975066 pos_rate=0.017954
  [cat 18] N=29 objAUC=0.8761904761904762 ptAUC=0.914416743196702 objAP=0.9103054353054352 ptAP=0.4270265507681844 pos_rate=0.013043
  [cat 19] N=29 objAUC=0.9857142857142858 ptAUC=0.9749292260764113 objAP=0.9859693877551019 ptAP=0.7307896383095132 pos_rate=0.019884
  [cat 20] N=30 objAUC=0.9688888888888889 ptAUC=0.880732403168935 objAP=0.9698064353946707 ptAP=0.44315869567725563 pos_rate=0.026679
  [cat 21] N=29 objAUC=0.8 ptAUC=0.9200002696513799 objAP=0.8307343924191749 ptAP=0.20288829945148817 pos_rate=0.017620
  [cat 22] N=38 objAUC=0.7884057971014493 ptAUC=0.9193751295841633 objAP=0.8693225783736793 ptAP=0.47106712944932927 pos_rate=0.018304
  [cat 23] N=29 objAUC=0.9380952380952381 ptAUC=0.9309656469514471 objAP=0.9385813434685615 ptAP=0.25481906431324874 pos_rate=0.014613
  [cat 24] N=38 objAUC=0.8260869565217391 ptAUC=0.9455957494891514 objAP=0.909643652146849 ptAP=0.6450509129938853 pos_rate=0.006283
  [cat 25] N=37 objAUC=0.6303030303030304 ptAUC=0.8484706320884656 objAP=0.7473852777657124 ptAP=0.2274481535018088 pos_rate=0.013238
  [cat 26] N=29 objAUC=0.9571428571428571 ptAUC=0.978591123391137 objAP=0.9655939298796441 ptAP=0.6792978865535586 pos_rate=0.014029
  [cat 27] N=29 objAUC=0.7476190476190476 ptAUC=0.885076394238539 objAP=0.7106110303315272 ptAP=0.21447612587620218 pos_rate=0.028549
  [cat 28] N=38 objAUC=0.6000000000000001 ptAUC=0.8261276902077516 objAP=0.7569654026351079 ptAP=0.30249756173331077 pos_rate=0.012866
  [cat 29] N=37 objAUC=0.6 ptAUC=0.8459087891400349 objAP=0.7895738231984164 ptAP=0.4524415247117457 pos_rate=0.021178
  [cat 30] N=33 objAUC=0.6 ptAUC=0.790918028224084 objAP=0.7213938678992579 ptAP=0.2206596085809877 pos_rate=0.011334
  [cat 31] N=31 objAUC=0.9958333333333333 ptAUC=0.9841217582151875 objAP=0.9963235294117647 ptAP=0.6978420095848011 pos_rate=0.022079
  [cat 32] N=29 objAUC=0.9238095238095239 ptAUC=0.8961957140957765 objAP=0.9212353939244695 ptAP=0.32584297589844435 pos_rate=0.008025
  [cat 33] N=29 objAUC=0.980952380952381 ptAUC=0.985929452561336 objAP=0.9815476190476189 ptAP=0.739022891480664 pos_rate=0.008483
  [cat 34] N=37 objAUC=0.8242424242424241 ptAUC=0.927793735044752 objAP=0.9045465132693391 ptAP=0.4870834540939297 pos_rate=0.017268
  [cat 35] N=37 objAUC=0.6696969696969697 ptAUC=0.9609523716305602 objAP=0.8144188166262007 ptAP=0.45867698771810317 pos_rate=0.005107
  [cat 36] N=29 objAUC=0.7476190476190476 ptAUC=0.9308892413765129 objAP=0.7906466549323692 ptAP=0.5037553295933755 pos_rate=0.010180
  [cat 37] N=29 objAUC=0.980952380952381 ptAUC=0.9928546934633099 objAP=0.9804748822605964 ptAP=0.670756109070304 pos_rate=0.006073
  [cat 38] N=37 objAUC=0.7909090909090909 ptAUC=0.9705554743637462 objAP=0.8963720185371242 ptAP=0.8479061166362735 pos_rate=0.007699
  [cat 39] N=37 objAUC=0.8636363636363635 ptAUC=0.972256480340153 objAP=0.9294937323811421 ptAP=0.8074428094624838 pos_rate=0.008288
  [category-macro] objAUC=0.8462495701126993 ptAUC=0.9386197782552376 objAP=0.8957600625776732 ptAP=0.5382996634127073
[Metrics CSV] saved to ./resulst/metrics_mad_AnomalyShapeNet.csv
